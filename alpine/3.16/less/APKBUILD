# Contributor: Cameron Banta <cbanta@gmail.com>
# Maintainer: Cameron Banta <cbanta@gmail.com>
pkgname=less
pkgver=590
pkgrel=10071
# Security fixes:
# Patched for CVE-2022-46663,
pkgdesc="File pager"
url="https://www.greenwoodsoftware.com/less/"
arch="all"
license="GPL-3.0-or-later OR BSD-2-Clause"
options="!check"
makedepends="ncurses-dev"
subpackages="$pkgname-doc"
source="https://www.greenwoodsoftware.com/less/less-$pkgver.tar.gz
	$pkgname-hyperlink-filter-cve.patch::https://github.com/gwsw/less/commit/a78e1351113cef564d790a730d657a321624d79c.patch
	"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
426fa5840fd43c17bd5a452ad35ad24f2d6684623c6914403fd0059af62266bf2138e6828c7d73a1cef26a736c0d2b8ed4ab180eea8297281dae79a4228eb903  less-590.tar.gz
0ef401d74b3ec59f664ee4ac16624b2861a548d36711064ab659b67dea14974307277eb754874a1f74694c46fbb0d5042ec3a5a4320a78c47594062e39f46812  less-hyperlink-filter-cve.patch
"
